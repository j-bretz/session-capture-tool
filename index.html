<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session Documentation Tool</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        function SessionCaptureTool() {
          const [sessionData, setSessionData] = useState({
            date: new Date().toISOString().split('T')[0],
            sessionType: 'individual',
            duration: '',
            quickNotes: '',
            presentation: [],
            substanceUse: [],
            treatmentProgress: '',
            interventions: [],
            responseToInterventions: [],
            riskConcerns: false,
            riskDetails: '',
            sessionFlow: [],
            nextSteps: ''
          });

          const [isComplete, setIsComplete] = useState(false);

          const commonInterventions = [
            'Motivational Interviewing',
            'CBT - Cognitive Restructuring',
            'Psychoeducation',
            'Crisis Intervention',
            'Relapse Prevention',
            'Mindfulness/Grounding',
            'Problem Solving'
          ];

          const presentationOptions = [
            'Cooperative',
            'Engaged',
            'Anxious',
            'Depressed/Flat',
            'Guarded',
            'Irritable',
            'Tearful',
            'Focused',
            'Distracted',
            'Defensive'
          ];

          const substanceUseOptions = [
            'Denied cravings',
            'Reported cravings',
            'Denied urges',
            'Reported urges',
            'Denied thoughts of use',
            'Reported thoughts of use'
          ];

          const responseOptions = [
            'Receptive',
            'Engaged with material',
            'Demonstrated understanding',
            'Applied skills in session',
            'Resistant',
            'Minimally engaged',
            'Required redirection',
            'Expressed willingness to practice'
          ];

          const sessionFlowOptions = [
            'Check-in/Opening',
            'Review Previous Session',
            'Explored Primary Concern',
            'Skill Building',
            'Homework Review',
            'Crisis Management',
            'Treatment Planning',
            'Closing/Summary'
          ];

          const togglePresentation = (item) => {
            setSessionData(prev => ({
              ...prev,
              presentation: prev.presentation.includes(item)
                ? prev.presentation.filter(i => i !== item)
                : [...prev.presentation, item]
            }));
          };

          const toggleSubstanceUse = (item) => {
            setSessionData(prev => ({
              ...prev,
              substanceUse: prev.substanceUse.includes(item)
                ? prev.substanceUse.filter(i => i !== item)
                : [...prev.substanceUse, item]
            }));
          };

          const toggleResponse = (item) => {
            setSessionData(prev => ({
              ...prev,
              responseToInterventions: prev.responseToInterventions.includes(item)
                ? prev.responseToInterventions.filter(i => i !== item)
                : [...prev.responseToInterventions, item]
            }));
          };

          const toggleIntervention = (intervention) => {
            setSessionData(prev => ({
              ...prev,
              interventions: prev.interventions.includes(intervention)
                ? prev.interventions.filter(i => i !== intervention)
                : [...prev.interventions, intervention]
            }));
          };

          const toggleFlowMarker = (marker) => {
            setSessionData(prev => ({
              ...prev,
              sessionFlow: prev.sessionFlow.includes(marker)
                ? prev.sessionFlow.filter(m => m !== marker)
                : [...prev.sessionFlow, marker]
            }));
          };

          const formatNote = () => {
            return `DATE: ${sessionData.date}
SESSION TYPE: ${sessionData.sessionType}
DURATION: ${sessionData.duration || '[Duration]'} minutes

CLIENT PRESENTATION/AFFECT:
${sessionData.presentation.length > 0 ? sessionData.presentation.join(', ') : '[No presentation markers selected]'}

SUBSTANCE USE (Cravings/Urges/Thoughts):
${sessionData.substanceUse.length > 0 ? sessionData.substanceUse.map(i => `- ${i}`).join('\n') : '- [No substance use items documented]'}

PRESENTING CONCERN/SESSION FOCUS:
${sessionData.quickNotes || '[No notes captured]'}

INTERVENTIONS USED:
${sessionData.interventions.length > 0 ? sessionData.interventions.map(i => `- ${i}`).join('\n') : '- [No interventions marked]'}

CLIENT RESPONSE TO INTERVENTIONS:
${sessionData.responseToInterventions.length > 0 ? sessionData.responseToInterventions.join(', ') : '[No response documented]'}

PROGRESS TOWARD TREATMENT GOALS:
${sessionData.treatmentProgress || '[No progress documented]'}

SESSION FLOW:
${sessionData.sessionFlow.length > 0 ? sessionData.sessionFlow.map(f => `- ${f}`).join('\n') : '- [No flow markers captured]'}

${sessionData.riskConcerns ? `RISK/SAFETY CONCERNS:
${sessionData.riskDetails || '[Risk flagged but no details provided]'}` : 'No immediate risk or safety concerns noted.'}

NEXT STEPS/PLAN:
${sessionData.nextSteps || '[Add next steps, homework, or follow-up items]'}`;
          };

          if (isComplete) {
            return (
              <div className="max-w-4xl mx-auto p-6 bg-white">
                <div className="mb-6">
                  <h2 className="text-2xl font-semibold text-gray-800 mb-2">Session Note Ready</h2>
                  <p className="text-gray-600">Review and refine before copying to Remarkable</p>
                </div>

                <div className="bg-gray-50 border border-gray-200 rounded p-6 mb-6">
                  <pre className="whitespace-pre-wrap font-mono text-sm text-gray-800">
                    {formatNote()}
                  </pre>
                </div>

                <div className="flex gap-3">
                  <button
                    onClick={() => {
                      navigator.clipboard.writeText(formatNote());
                      alert('Note copied to clipboard');
                    }}
                    className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                  >
                    Copy to Clipboard
                  </button>
                  <button
                    onClick={() => setIsComplete(false)}
                    className="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300"
                  >
                    Back to Edit
                  </button>
                  <button
                    onClick={() => {
                      setSessionData({
                        date: new Date().toISOString().split('T')[0],
                        sessionType: 'individual',
                        duration: '',
                        quickNotes: '',
                        presentation: [],
                        substanceUse: [],
                        treatmentProgress: '',
                        interventions: [],
                        responseToInterventions: [],
                        riskConcerns: false,
                        riskDetails: '',
                        sessionFlow: [],
                        nextSteps: ''
                      });
                      setIsComplete(false);
                    }}
                    className="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300"
                  >
                    New Session
                  </button>
                </div>
              </div>
            );
          }

          return (
            <div className="max-w-6xl mx-auto p-6 bg-white">
              <div className="mb-6">
                <h1 className="text-2xl font-semibold text-gray-800 mb-2">Session Documentation</h1>
                <p className="text-gray-600">Capture notes during session, format after</p>
              </div>

              <div className="grid grid-cols-3 gap-4 mb-6">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Date</label>
                  <input
                    type="date"
                    value={sessionData.date}
                    onChange={(e) => setSessionData(prev => ({ ...prev, date: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Duration (min)</label>
                  <input
                    type="number"
                    value={sessionData.duration}
                    onChange={(e) => setSessionData(prev => ({ ...prev, duration: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded"
                    placeholder="30"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Session Type</label>
                  <select
                    value={sessionData.sessionType}
                    onChange={(e) => setSessionData(prev => ({ ...prev, sessionType: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded"
                  >
                    <option value="individual">Individual</option>
                    <option value="family">Family</option>
                    <option value="group">Group</option>
                    <option value="crisis">Crisis</option>
                  </select>
                </div>
              </div>

              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Client Presentation/Affect
                </label>
                <div className="grid grid-cols-3 gap-2">
                  {presentationOptions.map(item => (
                    <button
                      key={item}
                      onClick={() => togglePresentation(item)}
                      className={`px-3 py-2 text-sm rounded text-left ${
                        sessionData.presentation.includes(item)
                          ? 'bg-purple-600 text-white'
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`}
                    >
                      {item}
                    </button>
                  ))}
                </div>
              </div>

              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Substance Use (Cravings/Urges/Thoughts)
                </label>
                <div className="grid grid-cols-2 gap-2">
                  {substanceUseOptions.map(item => (
                    <button
                      key={item}
                      onClick={() => toggleSubstanceUse(item)}
                      className={`px-3 py-2 text-sm rounded text-left ${
                        sessionData.substanceUse.includes(item)
                          ? 'bg-indigo-600 text-white'
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`}
                    >
                      {item}
                    </button>
                  ))}
                </div>
              </div>

              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Presenting Concern/Session Focus
                </label>
                <textarea
                  value={sessionData.quickNotes}
                  onChange={(e) => setSessionData(prev => ({ ...prev, quickNotes: e.target.value }))}
                  className="w-full px-3 py-2 border border-gray-300 rounded h-32"
                  placeholder="Why are you having the session today? What are you focusing on?"
                />
              </div>

              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Interventions Used (click as you use them)
                </label>
                <div className="grid grid-cols-2 gap-2">
                  {commonInterventions.map(intervention => (
                    <button
                      key={intervention}
                      onClick={() => toggleIntervention(intervention)}
                      className={`px-3 py-2 text-sm rounded text-left ${
                        sessionData.interventions.includes(intervention)
                          ? 'bg-blue-600 text-white'
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`}
                    >
                      {intervention}
                    </button>
                  ))}
                </div>
              </div>

              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Client Response to Interventions
                </label>
                <div className="grid grid-cols-2 gap-2">
                  {responseOptions.map(item => (
                    <button
                      key={item}
                      onClick={() => toggleResponse(item)}
                      className={`px-3 py-2 text-sm rounded text-left ${
                        sessionData.responseToInterventions.includes(item)
                          ? 'bg-teal-600 text-white'
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`}
                    >
                      {item}
                    </button>
                  ))}
                </div>
              </div>

              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Session Flow (mark transitions)
                </label>
                <div className="grid grid-cols-2 gap-2">
                  {sessionFlowOptions.map(marker => (
                    <button
                      key={marker}
                      onClick={() => toggleFlowMarker(marker)}
                      className={`px-3 py-2 text-sm rounded text-left ${
                        sessionData.sessionFlow.includes(marker)
                          ? 'bg-green-600 text-white'
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`}
                    >
                      {marker}
                    </button>
                  ))}
                </div>
              </div>

              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Progress Toward Treatment Goals
                </label>
                <textarea
                  value={sessionData.treatmentProgress}
                  onChange={(e) => setSessionData(prev => ({ ...prev, treatmentProgress: e.target.value }))}
                  className="w-full px-3 py-2 border border-gray-300 rounded h-24"
                  placeholder="Document progress on specific treatment plan objectives..."
                />
              </div>

              <div className="mb-6 p-4 border-2 border-orange-200 bg-orange-50 rounded">
                <div className="flex items-center gap-2 mb-2">
                  <label className="flex items-center text-sm font-medium text-gray-700">
                    <input
                      type="checkbox"
                      checked={sessionData.riskConcerns}
                      onChange={(e) => setSessionData(prev => ({ ...prev, riskConcerns: e.target.checked }))}
                      className="mr-2"
                    />
                    Flag Risk/Safety Concerns
                  </label>
                </div>
                {sessionData.riskConcerns && (
                  <textarea
                    value={sessionData.riskDetails}
                    onChange={(e) => setSessionData(prev => ({ ...prev, riskDetails: e.target.value }))}
                    className="w-full px-3 py-2 border border-orange-300 rounded"
                    placeholder="Describe safety concerns..."
                    rows="3"
                  />
                )}
              </div>

              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Next Steps/Plan
                </label>
                <textarea
                  value={sessionData.nextSteps}
                  onChange={(e) => setSessionData(prev => ({ ...prev, nextSteps: e.target.value }))}
                  className="w-full px-3 py-2 border border-gray-300 rounded h-24"
                  placeholder="Homework assigned, follow-up needed, referrals, next session focus..."
                />
              </div>

              <div className="flex gap-3">
                <button
                  onClick={() => setIsComplete(true)}
                  className="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2"
                >
                  Generate Note
                </button>
              </div>
            </div>
          );
        }

        ReactDOM.render(<SessionCaptureTool />, document.getElementById('root'));
    </script>
</body>
</html>

